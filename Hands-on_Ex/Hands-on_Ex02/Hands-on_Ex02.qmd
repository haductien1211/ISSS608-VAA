---
title: "Hands-on Exercise 2"
author: "Ha Duc Tien"
date: "April 14, 2024"
date-modified: "last-modified"
execute: 
  eval: true
  echo: true
  warning: false
  freeze: true
---

# Installing and loading the required libraries

```{r}
pacman::p_load(ggrepel, patchwork, 
               ggthemes, hrbrthemes,
               tidyverse) 
```

# Importing data

```{r}
exam_data <- read_csv("data/Exam_data.csv")
```

# Beyond ggplot2 Annotation: ggrepel

## Working without ggrepel

::: panel-tabset
## The plot

```{r}
#| echo: false
ggplot(data = exam_data, aes(x = MATHS, y = ENGLISH)) +
  geom_point() +
  geom_smooth(method = lm, size = 0.5) +
  geom_label(aes(label = ID), hjust = 0.5, vjust = -0.5) +
  coord_cartesian(xlim = c(0,100), ylim = c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")

```

## The code

```{r}
#| eval: false
ggplot(data = exam_data, aes(x = MATHS, y = ENGLISH)) +
  geom_point() +
  geom_smooth(method = lm, size = 0.5) +
  geom_label(aes(label = ID), hjust = 0.5, vjust = -0.5) +
  coord_cartesian(xlim = c(0,100), ylim = c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")


```
:::

## Working with ggrepel

Simply replace geom_label() by [geom_label_repel()](https://ggrepel.slowkow.com/reference/geom_text_repel.html)

::: panel-tabset
## The plot

```{r}
#| echo: false
ggplot(data = exam_data, aes(x = MATHS, y = ENGLISH)) +
  geom_point() +
  geom_smooth(method = lm, size = 0.5) +
  geom_label_repel(aes(label = ID), fontface = "bold") +
  coord_cartesian(xlim = c(0,100), ylim = c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")

```

## The code

```{r}
#| eval: false
ggplot(data = exam_data, aes(x = MATHS, y = ENGLISH)) +
  geom_point() +
  geom_smooth(method = lm, size = 0.5) +
  geom_label_repel(aes(label = ID), fontface = "bold") +
  coord_cartesian(xlim = c(0,100), ylim = c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")

```
:::

# Beyond ggplot2 Themes

ggplot2 comes with eight [built-in themes](https://ggplot2.tidyverse.org/reference/ggtheme.html), they are: theme_gray(), theme_bw(), theme_classic(), theme_dark(), theme_light(), theme_linedraw(), theme_minimal(), and theme_void()

::: panel-tabset
## The plot

```{r}
#| echo: false
ggplot(data = exam_data, aes(x= MATHS))+
  geom_histogram(bin = 20, boundary = 100, color = "grey10", fill = "grey90") +
  theme_bw() +
  ggtitle("Distribution of Maths scores")
```

## The code

```{r}
#| eval: false
ggplot(data = exam_data, aes(x= MATHS))+
  geom_histogram(bin = 20, boundary = 100, color = "grey10", fill = "grey90") +
  theme_bw() +
  ggtitle("Distribution of Maths scores")
```
:::

## Working with ggtheme package

[**ggthemes**](https://cran.r-project.org/web/packages/ggthemes/) provides [‘ggplot2’ themes](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) that replicate the look of plots by Edward Tufte, Stephen Few, [Fivethirtyeight](https://abcnews.go.com/538), [The Economist](https://www.economist.com/graphic-detail), ‘Stata’, ‘Excel’, and [The Wall Street Journal](https://www.pinterest.com/wsjgraphics/wsj-graphics/), among others.

::: panel-tabset

## The plot

```{r}
#| echo: false
ggplot(data = exam_data, aes(x= MATHS))+
  geom_histogram(bin = 20, boundary = 100, color = "grey10", fill = "grey90") +
  ggtitle("Distribution of Maths scores") +
  theme_economist()
```

## The code

```{r}
#| eval: false
ggplot(data = exam_data, aes(x= MATHS))+
  geom_histogram(bin = 20, boundary = 100, color = "grey10", fill = "grey90") +
  ggtitle("Distribution of Maths scores") +
  theme_economist()
```
:::
